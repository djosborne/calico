{%- comment -%}This if statement maintains backwards compatability for the old way of calling this include{%- endcomment -%}
{%- if include.release -%}
    {%- assign version = include.release.components[include.component].version -%}
{%- else -%}
    {%- assign version = include.version -%}
{%- endif -%}

{%- if release.title != "master" -%}
{%- case include.component -%}

{%- when 'node' -%}
https://github.com/projectcalico/node/releases/tag/{{ version }}

{%- when 'calicoctl' -%}
https://github.com/projectcalico/calicoctl/releases/tag/{{ version }}

{%- when 'cni' -%}
https://github.com/projectcalico/cni-plugin/releases/tag/{{ version }}

{%- when 'kubeControllers' -%}
https://github.com/projectcalico/k8s-policy/releases/tag/{{ version }}

{%- when 'networking-calico' -%}
https://opendev.org/openstack/networking-calico/src/tag/{{ version }}

{%- when 'typha' -%}
https://github.com/projectcalico/typha/releases/tag/{{ version }}

{%- when 'flannel' -%}
https://github.com/coreos/flannel/releases/tag/{{ version }}

{%- when 'dikastes' -%}
https://github.com/projectcalico/app-policy/releases/tag/{{ version }}

{%- when 'flexvol' -%}
https://github.com/projectcalico/pod2daemon/releases/tag/{{ version }}

{%- endcase -%}

{%- else -%}
{% comment %}
For the master docs, there are no releases to link to. So this page will just return an empty string.
Except for 'calicoctl', as we do host direct downloads to a binary of calicoctl.
{% endcomment %}
{%- if include.component == "calicoctl" -%}
https://www.projectcalico.org/builds/calicoctl
{%- endif -%}

{%- endif -%}